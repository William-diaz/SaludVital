name: CD - VitalApp

on:
  push:
    branches: [ "main" ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Descargar código
      uses: actions/checkout@v3

    - name: Configurar Docker
      uses: docker/setup-buildx-action@v2

    - name: Construir imagen Docker
      run: docker build -t vitalapp:latest .

    - name: Ejecutar contenedor en servidor
      run: |
        echo "Aquí se haría el despliegue en staging o producción"
        # Ejemplo si tienes un servidor remoto:
        # docker save vitalapp:latest | ssh usuario@tu-servidor "docker load && docker run -d -p 8080:8080 vitalapp:latest"
